# 18-1. 모델 2 구조와 MVC 패턴
## 모델 1 구조

![image](https://github.com/GYUNGAEEEE/JSP/assets/158580466/f2787797-3d96-4114-a4b8-b102c8d73682)

모델 1 구조는 웹 브라우저의 요청을 JSP가 직접 처리한다.
웹 브라우저의 요청을 받은 JSP는 자바빈이나 서비스 클래스를 사용해서 웹 브라우저가 요청한 작업을 처리하고 그 결과를 클라이언트에 출력한다.

JSP 페이지에서 웹 브라우저가 요청한 것들을 처리한다는 것은 JSP 페이지에 비즈니스 로직을 처리하기 위한 코드와 
웹 브라우저에 결과를 출력하는 코드가 섞인다는 것을 의미한다.
***
## 모델 2 구조

![image](https://github.com/GYUNGAEEEE/JSP/assets/158580466/49f6fa3c-efca-4fd2-898f-e64852697525)

모델 2 구조는 모델 1 구조와 달리 웹 브라우저의 요청을 하나의 서블릿이 받는다. 
서블릿은 웹 브라우저의 요청을 알맞게 처리한 후 그 결과를 보여줄 JSP 페이지로 포워딩한다. 
포워딩을 통해 요청 흐름을 받은 JSP 페이지는 결과 화면을 클라이언트에 전송한다. 이 과정에서 서블릿이 로직을 처리한다.

모델 2 구조의 특징은 웹 브라우저의 모든 요청을 단일 진입점, 즉 하나의 서블릿에서 처리한다는 점이다. 
하나의 서블릿이 웹 브라우저의 모든 요청을 받기 때문에, 서블릿은 웹 브라우저의 요청을 구분하는 방법이 필요하다. 
서블릿은 웹 브라우저의 요청을 처리한 후 웹 브라우저에 보이게 될 응답 화면을 생성할 JSP를 선택한다.

모델 2 구조의 이러한 특징 때문에, MVC(Model-View—Controller; 모델-뷰-컨트롤러) 패턴을 이용해서 웹 어플리케이션을 구현할 때 
모델 2 구조를 사용한다.
***
## MVC 패턴
MVC 패턴은 크게 모델, 뷰, 컨트롤러의 세 부분으로 구성되며, 각각의 요소는 다음과 같은 역할을 담당한다.
- 모델 : 비즈니스 영역의 로직을 처리한다.
- 뷰 : 비즈니스 영역에 대한 프레젠테이션 뷰(즉, 사용자가 보게 될 결과 화면)를 담당한다.
- 컨트롤러 : 사용자의 입력 처리와 흐름 제어를 담당한다.

![image](https://github.com/GYUNGAEEEE/JSP/assets/158580466/2eeb0b96-d285-4c4b-af76-62103881e2f9)

사용자는 원하는 기능을 처리하기 위한 모든 요청을 컨트롤러에 보낸다. 
모델은 비즈니스와 관련된 기능을 제공하는데, 컨트롤러는 이 모델을 이용해서 사용자의 요청을 처리한다. 
모델을 사용하여 알맞은 비즈니스 로직을 수행한 후 컨트롤러는 사용자에게 보여줄 뷰를 선택한다. 
선택된 뷰는 사용자에게 알맞은 결과 화면을 보여준다. 
뷰가 사용자에게 결과 화면을 보여줄 때에는 데이터가 필요한데, 이 데이터는 컨트롤러를 통해서 전달받는다.

MVC 패턴의 핵심은 다음과 같다.
- 비즈니스 로직을 처리하는 모델과 결과 화면을 보여주는 뷰를 분리한다.
- 어플리케이션의 흐름 제어나 사용자의 처리 요청은 컨트롤러에 집중된다.

즉, MVC 패턴을 사용함으로써 유지보수 작업이 쉬워지고 어플리케이션을 쉽게 확장할 수 있게 된다.
***
## MVC 패턴과 모델2 구조의 매핑
- 컨트롤러 = 서블릿
- 모델 = 로직 처리 클래스, 자바빈
- 뷰 = JSP
- 사용자 = 웹 브라우저 내지 휴대폰과 같은 다양한 기기
***
## MVC의 컨트롤러: 서블릿
모델 2 구조에서 서블릿은 MVC 패턴의 컨트롤러 역할을 한다. 
서블릿은 웹 브라우저의 요청과 웹 어플리케이션의 전체적인 흐름을 제어한다.

![image](https://github.com/GYUNGAEEEE/JSP/assets/158580466/cabf72aa-8727-4cc7-ac9a-5cc10c206b6c)

- 과정1: 웹 브라우저가 전송한 HTTP 요청을 받는다. 서블릿의 doGet() 메서드나 doPost() 메서드가 호출된다.
- 과정2: 웹 브라우저가 어떤 기능을 요청했는지 분석한다. 예를 들어, 게시판 목록을 요청했는지, 글쓰기를 요청했는지 알아낸다.
- 과정3: 모델을 사용하여 요청한 기능을 수행한다.
- 과정4: 모델로부터 전달받은 결과물을 알맞게 가공한 후, request나 session의 setAttribute() 메서드를 사용하여 결과값을 속성에 저장한다.
이렇게 저장한 결과값은 뷰인 JSP에서 사용한다.
- 과정5: 웹 브라우저에 결과를 전송할 JSP를 선택한 후, 해당 JSP로 포워딩한다. 경우에 따라 리다이렉트를 하기도 한다.
***
## MVC의 뷰: JSP
모델 2 구조에서 JSP는 비즈니스 로직과 관련된 코드가 없는 뷰 역할을 담당한다.
뷰 역할을 하는 JSP는 컨트롤러에서 request 기본 객체나 session 기본 객체에 저장한 데이터를 사용하여 웹 브라우저에 알맞은 결과를 출력한다.

JSP는 프레젠테이션의 역할을 할 뿐만 아니라 웹 브라우저의 요청을 컨트롤러에 전달하는 매개체가 되기도 한다.
예를 들어, 글 목록을 보여주는 'BoardList.jsp'가 [글쓰기]와 같은 링크를 통해 컨트롤러에 연결할 수 있다.
***
## MVC의 모델
모델은 명확하게 어떤 것을 통해서 구현한다는 규칙은 없다. 
비즈니스 로직을 처리해주면 모델이 될 수 있다. 
모델이 제공해야 하는 기능은 웹 브라우저의 요청을 처리하는 데 필요한 기능이다.

![image](https://github.com/GYUNGAEEEE/JSP/assets/158580466/9691612a-ef75-4d75-8890-11a9ea1b23d5)

모델은 컨트롤러가 요청한 작업을 처리한 후 알맞은 결과를 컨트롤러에게 전달하는데, 
이때 처리한 결과값을 저장하는 객체로 보통 자바빈을 사용한다. 
모델은 서비스 클래스나 DAO 클래스를 이용해서 비즈니스 로직을 수행하게 된다.
